<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Value.zig - source view</title>
    <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPNJREFUeNpi/P//PwMlgOXHUjly9E0G4hwgZmQiQZMqEK8H4v9QzUEgQSaoADK+zhH9iAGL+C0gDoAaNg9mGLoLfgA1awK9hS9gzgJxA9RQBmQDrgMxJzRMGKE4HYj/Ial5A8QmQLwCJoBsgBYW2+TR1ChDaWt4LOBxKsi/VUh8XiD+gq4IVyzwQAMJBoKwacZlAB8Qf0bi96IZhtOAe1D6LpqaEiz6rmEzQAeIzwGxCJpieFqApo/vQKyJboAaEBsAsSEupwI1MwKjGBTVHOhegMX5UajYRqiBjMgYmj400cVh0XgTiKdC0zhJgJHS7AwQYABm9EAdCKrEfAAAAABJRU5ErkJggg=="/>
    <style>
      body{
        font-family: system-ui, -apple-system, Roboto, "Segoe UI", sans-serif;
        margin: 0;
        line-height: 1.5;
      }

      pre > code {
        display: block;
        overflow: auto;
        line-height: normal;
        margin: 0em;
      }
      .tok-kw {
          color: #333;
          font-weight: bold;
      }
      .tok-str {
          color: #d14;
      }
      .tok-builtin {
          color: #005C7A;
      }
      .tok-comment {
          color: #545454;
          font-style: italic;
      }
      .tok-fn {
          color: #900;
          font-weight: bold;
      }
      .tok-null {
          color: #005C5C;
      }
      .tok-number {
          color: #005C5C;
      }
      .tok-type {
          color: #458;
          font-weight: bold;
      }
      pre {
        counter-reset: line;
      }
      pre .line:before {
        counter-increment: line;
        content: counter(line);
        display: inline-block;
        padding-right: 1em;
        width: 2em;
        text-align: right;
        color: #999;
      }
      
      .line {
        width: 100%;
        display: inline-block;
      }
      .line:target {
        border-top: 1px solid #ccc;
        border-bottom: 1px solid #ccc;
        background: #fafafa;
      }

      @media (prefers-color-scheme: dark) {
        body{
            background:#222;
            color: #ccc;
        }
        pre > code {
            color: #ccc;
            background: #222;
            border: unset;
        }
        .line:target {
            border-top: 1px solid #444;
            border-bottom: 1px solid #444;
            background: #333;
        }
        .tok-kw {
            color: #eee;
        }
        .tok-str {
            color: #2e5;
        }
        .tok-builtin {
            color: #ff894c;
        }
        .tok-comment {
            color: #aa7;
        }
        .tok-fn {
            color: #B1A0F8;
        }
        .tok-null {
            color: #ff8080;
        }
        .tok-number {
            color: #ff8080;
        }
        .tok-type {
            color: #68f;
        }
      }
    </style>
</head>
<body>
<pre><code><span class="line" id="L1"><span class="tok-comment">//! Argument that is expected in a specific order and should be interpreted as a specific type.</span></span>
<span class="line" id="L2"><span class="tok-comment">//!</span></span>
<span class="line" id="L3"><span class="tok-comment">//! End User Example:</span></span>
<span class="line" id="L4"><span class="tok-comment">//!</span></span>
<span class="line" id="L5"><span class="tok-comment">//! ```</span></span>
<span class="line" id="L6"><span class="tok-comment">//! # Values belonging to a Command.</span></span>
<span class="line" id="L7"><span class="tok-comment">//! myapp &quot;This string Value and the int Value after it both belong to the 'myapp' main Command.&quot; 13</span></span>
<span class="line" id="L8"><span class="tok-comment">//!</span></span>
<span class="line" id="L9"><span class="tok-comment">//! # Values belonging to an Option.</span></span>
<span class="line" id="L10"><span class="tok-comment">//! myapp --string_opt &quot;This Value belongs to the 'string_opt' Option.&quot;</span></span>
<span class="line" id="L11"><span class="tok-comment">//! ```</span></span>
<span class="line" id="L12"></span>
<span class="line" id="L13"><span class="tok-kw">const</span> std = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;std&quot;</span>);</span>
<span class="line" id="L14"><span class="tok-kw">const</span> builtin = std.builtin;</span>
<span class="line" id="L15"><span class="tok-kw">const</span> ascii = std.ascii;</span>
<span class="line" id="L16"><span class="tok-kw">const</span> fmt = std.fmt;</span>
<span class="line" id="L17"><span class="tok-kw">const</span> fs = std.fs;</span>
<span class="line" id="L18"><span class="tok-kw">const</span> mem = std.mem;</span>
<span class="line" id="L19"><span class="tok-kw">const</span> meta = std.meta;</span>
<span class="line" id="L20"></span>
<span class="line" id="L21"><span class="tok-kw">const</span> toLower = ascii.lowerString;</span>
<span class="line" id="L22"><span class="tok-kw">const</span> toUpper = ascii.upperString;</span>
<span class="line" id="L23"><span class="tok-kw">const</span> parseInt = fmt.parseInt;</span>
<span class="line" id="L24"><span class="tok-kw">const</span> parseFloat = fmt.parseFloat;</span>
<span class="line" id="L25"><span class="tok-kw">const</span> Type = builtin.Type;</span>
<span class="line" id="L26"><span class="tok-kw">const</span> UnionField = Type.UnionField;</span>
<span class="line" id="L27"></span>
<span class="line" id="L28"><span class="tok-comment">/// Config for custom Value types.</span></span>
<span class="line" id="L29"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> Config = <span class="tok-kw">struct</span> {</span>
<span class="line" id="L30">    <span class="tok-comment">/// Default Set Behavior for all Values.</span></span>
<span class="line" id="L31">    <span class="tok-comment">/// This can be overwritten on individual Values using the `Value.Typed.set_behavior` field.</span></span>
<span class="line" id="L32">    set_behavior: SetBehavior = .Last,</span>
<span class="line" id="L33">    <span class="tok-comment">/// Default Argument Delimiters for all Values.</span></span>
<span class="line" id="L34">    <span class="tok-comment">/// This can be overwritten on individual Values using the `Value.Typed.arg_delims` field.</span></span>
<span class="line" id="L35">    arg_delims: []<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-str">&quot;,;&quot;</span>,</span>
<span class="line" id="L36"></span>
<span class="line" id="L37">    <span class="tok-comment">/// Custom types for this project's Values.</span></span>
<span class="line" id="L38">    <span class="tok-comment">/// This is useful for adding additional types that aren't covered by the base `Value.Generic` union.</span></span>
<span class="line" id="L39">    <span class="tok-comment">/// Note, any non-numeric (Int, UInt, Float) types will require their own Parse Function to be implemented on the `Value.Typed.parse_fn` field.</span></span>
<span class="line" id="L40">    custom_types: []<span class="tok-kw">const</span> <span class="tok-type">type</span> = &amp;.{},</span>
<span class="line" id="L41"></span>
<span class="line" id="L42">    <span class="tok-comment">/// Use Custom Bit Width Range for Ints and UInts.</span></span>
<span class="line" id="L43">    <span class="tok-comment">/// This is useful for specifying a wide range of Int and UInt types for a project.</span></span>
<span class="line" id="L44">    <span class="tok-comment">/// Note, this will slow down compilation speed!!! (It does not affect runtime speed).</span></span>
<span class="line" id="L45">    use_custom_bit_width_range: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L46">    <span class="tok-comment">/// Minimum Bit Width for Ints and UInts in this Custom Value type.</span></span>
<span class="line" id="L47">    <span class="tok-comment">/// Note, only applies if `use_custom_bit_width_range` is set to `true`.</span></span>
<span class="line" id="L48">    min_int_bit_width: <span class="tok-type">u16</span> = <span class="tok-number">1</span>,</span>
<span class="line" id="L49">    <span class="tok-comment">/// Minimum Bit Width for Ints and UInts in this Custom Value type.</span></span>
<span class="line" id="L50">    <span class="tok-comment">/// Note, only applies if `use_custom_bit_width_range` is set to `true`.</span></span>
<span class="line" id="L51">    max_int_bit_width: <span class="tok-type">u16</span> = <span class="tok-number">256</span>,</span>
<span class="line" id="L52">};</span>
<span class="line" id="L53"></span>
<span class="line" id="L54"><span class="tok-comment">/// The Behavior for Setting Values with `set()`.</span></span>
<span class="line" id="L55"><span class="tok-comment">/// This applies to Values within Options and standalone Values.</span></span>
<span class="line" id="L56"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> SetBehavior = <span class="tok-kw">enum</span> {</span>
<span class="line" id="L57">    <span class="tok-comment">/// Keeps the First Argument this Value was `set()` to.</span></span>
<span class="line" id="L58">    First,</span>
<span class="line" id="L59">    <span class="tok-comment">/// Keeps the Last Argument this Value was `set()` to.</span></span>
<span class="line" id="L60">    Last,</span>
<span class="line" id="L61">    <span class="tok-comment">/// Keeps Multiple Arguments in this Value up to the Value's `max_args`.</span></span>
<span class="line" id="L62">    Multi,</span>
<span class="line" id="L63">};</span>
<span class="line" id="L64"></span>
<span class="line" id="L65"><span class="tok-comment">/// Create a Value with a specific Type (`SetT`).</span></span>
<span class="line" id="L66"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">Typed</span>(<span class="tok-kw">comptime</span> SetT: <span class="tok-type">type</span>, <span class="tok-kw">comptime</span> config: Config) <span class="tok-type">type</span> {</span>
<span class="line" id="L67">    <span class="tok-kw">return</span> <span class="tok-kw">struct</span> {</span>
<span class="line" id="L68">        <span class="tok-comment">/// The child Type of this Value.</span></span>
<span class="line" id="L69">        <span class="tok-kw">pub</span> <span class="tok-kw">const</span> ChildT = SetT;</span>
<span class="line" id="L70"></span>
<span class="line" id="L71">        <span class="tok-comment">/// The Parsed and Validated Argument(s) this Value has been set to.</span></span>
<span class="line" id="L72">        <span class="tok-comment">///</span></span>
<span class="line" id="L73">        <span class="tok-comment">/// **Internal Use.**</span></span>
<span class="line" id="L74">        _set_args: [<span class="tok-number">100</span>]?ChildT = .{ <span class="tok-null">null</span> } ** <span class="tok-number">100</span>,</span>
<span class="line" id="L75">        <span class="tok-comment">/// The current Index of Raw Arguments for this Value.</span></span>
<span class="line" id="L76">        <span class="tok-comment">///</span></span>
<span class="line" id="L77">        <span class="tok-comment">/// **Internal Use.**</span></span>
<span class="line" id="L78">        _arg_idx: <span class="tok-type">u7</span> = <span class="tok-number">0</span>,</span>
<span class="line" id="L79">        <span class="tok-comment">/// The Max number of Raw Arguments that can be provided.</span></span>
<span class="line" id="L80">        <span class="tok-comment">/// This must be between 1 - 100.</span></span>
<span class="line" id="L81">        max_args: <span class="tok-type">u7</span> = <span class="tok-number">1</span>,</span>
<span class="line" id="L82">        <span class="tok-comment">/// Flag to determine if this Value is at max capacity for Raw Arguments.</span></span>
<span class="line" id="L83">        <span class="tok-comment">///</span></span>
<span class="line" id="L84">        <span class="tok-comment">/// *This should be Read-Only for library users.*</span></span>
<span class="line" id="L85">        is_maxed: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L86">        <span class="tok-comment">/// Delimiter Characters that can be used to split up Multi-Values or Multi-Options.</span></span>
<span class="line" id="L87">        <span class="tok-comment">/// This is only applicable if `set_behavior = .Multi`.</span></span>
<span class="line" id="L88">        arg_delims: []<span class="tok-kw">const</span> <span class="tok-type">u8</span> = config.arg_delims,</span>
<span class="line" id="L89">        <span class="tok-comment">/// Set Behavior for this Value.</span></span>
<span class="line" id="L90">        set_behavior: SetBehavior = config.set_behavior,</span>
<span class="line" id="L91">        <span class="tok-comment">/// An optional Default value for this Value.</span></span>
<span class="line" id="L92">        default_val: ?ChildT = <span class="tok-null">null</span>,</span>
<span class="line" id="L93">        <span class="tok-comment">/// Flag to determine if this Value has been Parsed and Validated.</span></span>
<span class="line" id="L94">        <span class="tok-comment">///</span></span>
<span class="line" id="L95">        <span class="tok-comment">/// *This should be Read-Only for library users.*</span></span>
<span class="line" id="L96">        is_set: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L97"></span>
<span class="line" id="L98">        <span class="tok-comment">/// A Parsing Function to be used in place of the normal `parse()` for Argument Parsing.</span></span>
<span class="line" id="L99">        <span class="tok-comment">/// Note that any error caught from this function will be returned as `error.CannotParseArgToValue`.</span></span>
<span class="line" id="L100">        parse_fn: ?*<span class="tok-kw">const</span> <span class="tok-kw">fn</span>([]<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <span class="tok-type">anyerror</span>!ChildT = <span class="tok-null">null</span>,</span>
<span class="line" id="L101">        <span class="tok-comment">/// A Validation Function to be used for Argument Validation in `set()` following Argument Parsing with `parse()`.</span></span>
<span class="line" id="L102">        valid_fn: ?*<span class="tok-kw">const</span> <span class="tok-kw">fn</span>(ChildT) <span class="tok-type">bool</span> = <span class="tok-kw">struct</span>{ <span class="tok-kw">fn</span> <span class="tok-fn">valFn</span>(val: ChildT) <span class="tok-type">bool</span> { <span class="tok-kw">return</span> <span class="tok-builtin">@TypeOf</span>(val) == ChildT; } }.valFn,</span>
<span class="line" id="L103">            </span>
<span class="line" id="L104">        <span class="tok-comment">/// The Name of this Value for user identification and Usage/Help messages.</span></span>
<span class="line" id="L105">        name: []<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L106">        <span class="tok-comment">/// The Description of this Value for Usage/Help messages.</span></span>
<span class="line" id="L107">        description: []<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-str">&quot;&quot;</span>,</span>
<span class="line" id="L108"></span>
<span class="line" id="L109">        <span class="tok-comment">/// Parse the given argument token (`arg`) to this Value's Type.</span></span>
<span class="line" id="L110">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">parse</span>(self: *<span class="tok-kw">const</span> <span class="tok-builtin">@This</span>(), arg: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) !ChildT {</span>
<span class="line" id="L111">            <span class="tok-kw">if</span> (self.parse_fn != <span class="tok-null">null</span>) <span class="tok-kw">return</span> self.parse_fn.?(arg) <span class="tok-kw">catch</span> <span class="tok-kw">error</span>.CannotParseArgToValue;</span>
<span class="line" id="L112">            <span class="tok-kw">var</span> san_arg_buf: [<span class="tok-number">512</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L113">            <span class="tok-kw">var</span> san_arg = toLower(san_arg_buf[<span class="tok-number">0</span>..], arg);</span>
<span class="line" id="L114">            <span class="tok-kw">return</span> <span class="tok-kw">switch</span> (<span class="tok-builtin">@typeInfo</span>(ChildT)) {</span>
<span class="line" id="L115">                .Bool =&gt; isTrue: {</span>
<span class="line" id="L116">                    <span class="tok-kw">const</span> true_words = [_][]<span class="tok-kw">const</span> <span class="tok-type">u8</span>{ <span class="tok-str">&quot;true&quot;</span>, <span class="tok-str">&quot;t&quot;</span>, <span class="tok-str">&quot;yes&quot;</span>, <span class="tok-str">&quot;y&quot;</span> };</span>
<span class="line" id="L117">                    <span class="tok-kw">for</span> (true_words[<span class="tok-number">0</span>..]) |word| { <span class="tok-kw">if</span> (mem.eql(<span class="tok-type">u8</span>, word, san_arg)) <span class="tok-kw">break</span> :isTrue <span class="tok-null">true</span>; } <span class="tok-kw">else</span> <span class="tok-kw">break</span> :isTrue <span class="tok-null">false</span>;</span>
<span class="line" id="L118">                },</span>
<span class="line" id="L119">                .Pointer =&gt; arg,</span>
<span class="line" id="L120">                .Int =&gt; parseInt(ChildT, arg, <span class="tok-number">0</span>),</span>
<span class="line" id="L121">                .Float =&gt; parseFloat(ChildT, arg),</span>
<span class="line" id="L122">                <span class="tok-kw">else</span> =&gt; <span class="tok-kw">error</span>.CannotParseArgToValue,</span>
<span class="line" id="L123">            };</span>
<span class="line" id="L124">        }</span>
<span class="line" id="L125"></span>
<span class="line" id="L126">        <span class="tok-comment">/// Set this Value if the provided argument token (`set_arg`) can be Parsed and Validated.</span></span>
<span class="line" id="L127">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">set</span>(self: *<span class="tok-kw">const</span> <span class="tok-builtin">@This</span>(), set_arg: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) !<span class="tok-type">void</span> {</span>
<span class="line" id="L128">            <span class="tok-comment">// Delimited Args</span>
</span>
<span class="line" id="L129">            <span class="tok-kw">var</span> arg_delim: <span class="tok-type">u8</span> = <span class="tok-str">' '</span>;</span>
<span class="line" id="L130">            <span class="tok-kw">const</span> check_delim: <span class="tok-type">bool</span> = checkDelim: {</span>
<span class="line" id="L131">                <span class="tok-kw">for</span> (self.arg_delims) |delim| {</span>
<span class="line" id="L132">                    <span class="tok-kw">if</span> (mem.indexOfScalar(<span class="tok-type">u8</span>, set_arg, delim) != <span class="tok-null">null</span>) {</span>
<span class="line" id="L133">                        arg_delim = delim;</span>
<span class="line" id="L134">                        <span class="tok-kw">break</span> :checkDelim <span class="tok-null">true</span>;</span>
<span class="line" id="L135">                    }</span>
<span class="line" id="L136">                }</span>
<span class="line" id="L137">                <span class="tok-kw">break</span> :checkDelim <span class="tok-null">false</span>;</span>
<span class="line" id="L138">            };</span>
<span class="line" id="L139">            <span class="tok-kw">if</span> (self.set_behavior == .Multi <span class="tok-kw">and</span> meta.activeTag(<span class="tok-builtin">@typeInfo</span>(ChildT)) != .Pointer <span class="tok-kw">and</span> check_delim) {</span>
<span class="line" id="L140">                <span class="tok-kw">var</span> split_args = mem.splitScalar(<span class="tok-type">u8</span>, set_arg, arg_delim);</span>
<span class="line" id="L141">                <span class="tok-kw">while</span> (split_args.next()) |arg| <span class="tok-kw">try</span> self.set(arg);</span>
<span class="line" id="L142">                <span class="tok-kw">return</span>;</span>
<span class="line" id="L143">            }</span>
<span class="line" id="L144"></span>
<span class="line" id="L145">            <span class="tok-comment">// Single Arg</span>
</span>
<span class="line" id="L146">            <span class="tok-kw">const</span> parsed_arg = <span class="tok-kw">try</span> self.parse(set_arg);</span>
<span class="line" id="L147">            <span class="tok-builtin">@constCast</span>(self).is_set =</span>
<span class="line" id="L148">                <span class="tok-kw">if</span> (self.valid_fn != <span class="tok-null">null</span>) self.valid_fn.?(parsed_arg)</span>
<span class="line" id="L149">                <span class="tok-kw">else</span> <span class="tok-null">true</span>;</span>
<span class="line" id="L150">            <span class="tok-kw">if</span> (self.is_set) {</span>
<span class="line" id="L151">                <span class="tok-kw">switch</span> (self.set_behavior) {</span>
<span class="line" id="L152">                    .First =&gt; <span class="tok-kw">if</span> (self._set_args[<span class="tok-number">0</span>] == <span class="tok-null">null</span>) { </span>
<span class="line" id="L153">                        <span class="tok-builtin">@constCast</span>(self)._set_args[<span class="tok-number">0</span>] = parsed_arg;</span>
<span class="line" id="L154">                        <span class="tok-builtin">@constCast</span>(self)._arg_idx += <span class="tok-number">1</span>;</span>
<span class="line" id="L155">                    },</span>
<span class="line" id="L156">                    .Last =&gt; {</span>
<span class="line" id="L157">                        <span class="tok-builtin">@constCast</span>(self)._set_args[<span class="tok-number">0</span>] = parsed_arg;</span>
<span class="line" id="L158">                        <span class="tok-kw">if</span> (self._arg_idx &lt; <span class="tok-number">1</span>) <span class="tok-builtin">@constCast</span>(self)._arg_idx += <span class="tok-number">1</span>;</span>
<span class="line" id="L159">                    },</span>
<span class="line" id="L160">                    .Multi =&gt; <span class="tok-kw">if</span> (self._arg_idx &lt; self.max_args) {</span>
<span class="line" id="L161">                        <span class="tok-builtin">@constCast</span>(self)._set_args[self._arg_idx] = parsed_arg;</span>
<span class="line" id="L162">                        <span class="tok-builtin">@constCast</span>(self)._arg_idx += <span class="tok-number">1</span>;</span>
<span class="line" id="L163">                    }</span>
<span class="line" id="L164">                }</span>
<span class="line" id="L165">                <span class="tok-builtin">@constCast</span>(self).is_maxed = self._arg_idx == self.max_args;</span>
<span class="line" id="L166">            }</span>
<span class="line" id="L167">            <span class="tok-kw">else</span> <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidValue;</span>
<span class="line" id="L168">        }</span>
<span class="line" id="L169"></span>
<span class="line" id="L170">        <span class="tok-comment">/// Get the first Parsed and Validated value of this Value.</span></span>
<span class="line" id="L171">        <span class="tok-comment">/// This will pull the first value from `_set_args` and should be used with the `First` or `Last` Set Behaviors.</span></span>
<span class="line" id="L172">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">get</span>(self: *<span class="tok-kw">const</span> <span class="tok-builtin">@This</span>()) !ChildT {</span>
<span class="line" id="L173">            <span class="tok-kw">return</span> </span>
<span class="line" id="L174">                <span class="tok-kw">if</span> (self.is_set) self._set_args[<span class="tok-number">0</span>].?</span>
<span class="line" id="L175">                <span class="tok-kw">else</span> <span class="tok-kw">if</span> (ChildT == <span class="tok-type">bool</span>) <span class="tok-null">false</span></span>
<span class="line" id="L176">                <span class="tok-kw">else</span> <span class="tok-kw">if</span> (self.default_val != <span class="tok-null">null</span>) self.default_val.?</span>
<span class="line" id="L177">                <span class="tok-kw">else</span> <span class="tok-kw">error</span>.ValueNotSet;</span>
<span class="line" id="L178">        }</span>
<span class="line" id="L179"></span>
<span class="line" id="L180">        <span class="tok-comment">/// Get All Parsed and Validated Arguments of this Value.</span></span>
<span class="line" id="L181">        <span class="tok-comment">/// This will pull All values from `_set_args` and should be used with `Multi` Set Behavior.</span></span>
<span class="line" id="L182">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">getAll</span>(self: *<span class="tok-kw">const</span> <span class="tok-builtin">@This</span>(), alloc: mem.Allocator) ![]ChildT {</span>
<span class="line" id="L183">            <span class="tok-kw">if</span> (!self.is_set) <span class="tok-kw">return</span> <span class="tok-kw">error</span>.ValueNotSet;</span>
<span class="line" id="L184">            <span class="tok-kw">var</span> vals = <span class="tok-kw">try</span> alloc.alloc(ChildT, self._arg_idx);</span>
<span class="line" id="L185">            <span class="tok-kw">for</span> (self._set_args[<span class="tok-number">0</span>..self._arg_idx], <span class="tok-number">0</span>..) |arg, idx| vals[idx] = arg.?;</span>
<span class="line" id="L186">            <span class="tok-kw">return</span> vals;</span>
<span class="line" id="L187">        }</span>
<span class="line" id="L188"></span>
<span class="line" id="L189">        <span class="tok-comment">/// Get the Value Type</span></span>
<span class="line" id="L190">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">getType</span>() <span class="tok-type">type</span> { <span class="tok-kw">return</span> ChildT; }</span>
<span class="line" id="L191">    };</span>
<span class="line" id="L192">}</span>
<span class="line" id="L193"></span>
<span class="line" id="L194"><span class="tok-comment">/// Generic Value to handle a Value regardless of its inner type. This encompasses Typed Values with Boolean, String `[]const u8`, Floats, and the Config (`config`) specified range of Signed/Unsigned Integers.</span></span>
<span class="line" id="L195"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">Generic</span>(<span class="tok-kw">comptime</span> config: Config) <span class="tok-type">type</span> {</span>
<span class="line" id="L196">    <span class="tok-comment">// Base Implementation</span>
</span>
<span class="line" id="L197">    <span class="tok-kw">return</span> <span class="tok-kw">if</span> (config.custom_types.len == <span class="tok-number">0</span> <span class="tok-kw">and</span> !config.use_custom_bit_width_range) <span class="tok-kw">union</span>(<span class="tok-kw">enum</span>){</span>
<span class="line" id="L198">        <span class="tok-type">bool</span>: Typed(<span class="tok-type">bool</span>, config),</span>
<span class="line" id="L199">        </span>
<span class="line" id="L200">        string: Typed([]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, config),</span>
<span class="line" id="L201">        </span>
<span class="line" id="L202">        <span class="tok-type">u1</span>: Typed(<span class="tok-type">u1</span>, config),</span>
<span class="line" id="L203">        <span class="tok-type">u2</span>: Typed(<span class="tok-type">u2</span>, config),</span>
<span class="line" id="L204">        <span class="tok-type">u3</span>: Typed(<span class="tok-type">u3</span>, config),</span>
<span class="line" id="L205">        <span class="tok-type">u4</span>: Typed(<span class="tok-type">u4</span>, config),</span>
<span class="line" id="L206">        <span class="tok-type">u8</span>: Typed(<span class="tok-type">u8</span>, config),</span>
<span class="line" id="L207">        <span class="tok-type">u16</span>: Typed(<span class="tok-type">u16</span>, config),</span>
<span class="line" id="L208">        <span class="tok-type">u32</span>: Typed(<span class="tok-type">u32</span>, config),</span>
<span class="line" id="L209">        <span class="tok-type">u64</span>: Typed(<span class="tok-type">u64</span>, config),</span>
<span class="line" id="L210">        <span class="tok-type">u128</span>: Typed(<span class="tok-type">u128</span>, config),</span>
<span class="line" id="L211">        <span class="tok-type">u256</span>: Typed(<span class="tok-type">u256</span>, config),</span>
<span class="line" id="L212"></span>
<span class="line" id="L213">        <span class="tok-type">i1</span>: Typed(<span class="tok-type">i1</span>, config),</span>
<span class="line" id="L214">        <span class="tok-type">i2</span>: Typed(<span class="tok-type">i2</span>, config),</span>
<span class="line" id="L215">        <span class="tok-type">i3</span>: Typed(<span class="tok-type">i3</span>, config),</span>
<span class="line" id="L216">        <span class="tok-type">i4</span>: Typed(<span class="tok-type">i4</span>, config),</span>
<span class="line" id="L217">        <span class="tok-type">i8</span>: Typed(<span class="tok-type">i8</span>, config),</span>
<span class="line" id="L218">        <span class="tok-type">i16</span>: Typed(<span class="tok-type">i16</span>, config),</span>
<span class="line" id="L219">        <span class="tok-type">i32</span>: Typed(<span class="tok-type">i32</span>, config),</span>
<span class="line" id="L220">        <span class="tok-type">i64</span>: Typed(<span class="tok-type">i64</span>, config),</span>
<span class="line" id="L221">        <span class="tok-type">i128</span>: Typed(<span class="tok-type">i128</span>, config),</span>
<span class="line" id="L222">        <span class="tok-type">i256</span>: Typed(<span class="tok-type">i256</span>, config),</span>
<span class="line" id="L223"></span>
<span class="line" id="L224">        <span class="tok-type">f16</span>: Typed(<span class="tok-type">f16</span>, config),</span>
<span class="line" id="L225">        <span class="tok-type">f32</span>: Typed(<span class="tok-type">f32</span>, config),</span>
<span class="line" id="L226">        <span class="tok-type">f64</span>: Typed(<span class="tok-type">f64</span>, config),</span>
<span class="line" id="L227">        <span class="tok-type">f128</span>: Typed(<span class="tok-type">f128</span>, config),</span>
<span class="line" id="L228">    }</span>
<span class="line" id="L229">    <span class="tok-comment">// Custom Implementation</span>
</span>
<span class="line" id="L230">    <span class="tok-kw">else</span> customUnion: { </span>
<span class="line" id="L231">        <span class="tok-kw">var</span> base_union = <span class="tok-kw">union</span>(<span class="tok-kw">enum</span>){</span>
<span class="line" id="L232">            <span class="tok-type">bool</span>: Typed(<span class="tok-type">bool</span>, config),</span>
<span class="line" id="L233">            </span>
<span class="line" id="L234">            string: Typed([]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, config),</span>
<span class="line" id="L235">            </span>
<span class="line" id="L236">            <span class="tok-type">f16</span>: Typed(<span class="tok-type">f16</span>, config),</span>
<span class="line" id="L237">            <span class="tok-type">f32</span>: Typed(<span class="tok-type">f32</span>, config),</span>
<span class="line" id="L238">            <span class="tok-type">f64</span>: Typed(<span class="tok-type">f64</span>, config),</span>
<span class="line" id="L239">            <span class="tok-type">f128</span>: Typed(<span class="tok-type">f128</span>, config),</span>
<span class="line" id="L240">        };</span>
<span class="line" id="L241">        </span>
<span class="line" id="L242">        <span class="tok-kw">var</span> union_info = <span class="tok-builtin">@typeInfo</span>(base_union).Union;</span>
<span class="line" id="L243">        <span class="tok-kw">var</span> tag_info = <span class="tok-builtin">@typeInfo</span>(union_info.tag_type.?).Enum;</span>
<span class="line" id="L244">        tag_info.tag_type = <span class="tok-type">usize</span>;</span>
<span class="line" id="L245">        <span class="tok-kw">if</span> (config.use_custom_bit_width_range) {</span>
<span class="line" id="L246">            <span class="tok-builtin">@setEvalBranchQuota</span>(config.max_int_bit_width * <span class="tok-number">10</span>);</span>
<span class="line" id="L247">            <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (config.min_int_bit_width..config.max_int_bit_width) |bit_width| {</span>
<span class="line" id="L248">                <span class="tok-kw">const</span> uint_name = <span class="tok-builtin">@typeName</span>(meta.Int(.unsigned, bit_width));</span>
<span class="line" id="L249">                <span class="tok-kw">const</span> uint_type = Typed(meta.Int(.unsigned, bit_width), config);</span>
<span class="line" id="L250">                union_info.fields = union_info.fields ++ .{ UnionField {</span>
<span class="line" id="L251">                   .name = uint_name, </span>
<span class="line" id="L252">                   .<span class="tok-type">type</span> = uint_type,</span>
<span class="line" id="L253">                   .alignment = <span class="tok-builtin">@alignOf</span>(uint_type),</span>
<span class="line" id="L254">                } };</span>
<span class="line" id="L255">                tag_info.fields = tag_info.fields ++ .{ .{</span>
<span class="line" id="L256">                    .name = uint_name,</span>
<span class="line" id="L257">                    .value = tag_info.fields.len</span>
<span class="line" id="L258">                } };</span>
<span class="line" id="L259"></span>
<span class="line" id="L260">                <span class="tok-kw">const</span> int_name = <span class="tok-builtin">@typeName</span>(meta.Int(.signed, bit_width));</span>
<span class="line" id="L261">                <span class="tok-kw">const</span> int_type = Typed(meta.Int(.signed, bit_width), config);</span>
<span class="line" id="L262">                union_info.fields = union_info.fields ++ .{ UnionField {</span>
<span class="line" id="L263">                   .name = int_name,</span>
<span class="line" id="L264">                   .<span class="tok-type">type</span> = int_type, </span>
<span class="line" id="L265">                   .alignment = <span class="tok-builtin">@alignOf</span>(int_type),</span>
<span class="line" id="L266">                } };</span>
<span class="line" id="L267">                tag_info.fields = tag_info.fields ++ .{ .{</span>
<span class="line" id="L268">                    .name = int_name,</span>
<span class="line" id="L269">                    .value = tag_info.fields.len</span>
<span class="line" id="L270">                } };</span>
<span class="line" id="L271">            }</span>
<span class="line" id="L272">        }</span>
<span class="line" id="L273">        <span class="tok-kw">else</span> {</span>
<span class="line" id="L274">            <span class="tok-kw">const</span> int_union = <span class="tok-kw">union</span>(<span class="tok-kw">enum</span>) {</span>
<span class="line" id="L275">                <span class="tok-type">u1</span>: Typed(<span class="tok-type">u1</span>, config),</span>
<span class="line" id="L276">                <span class="tok-type">u2</span>: Typed(<span class="tok-type">u2</span>, config),</span>
<span class="line" id="L277">                <span class="tok-type">u3</span>: Typed(<span class="tok-type">u3</span>, config),</span>
<span class="line" id="L278">                <span class="tok-type">u4</span>: Typed(<span class="tok-type">u4</span>, config),</span>
<span class="line" id="L279">                <span class="tok-type">u8</span>: Typed(<span class="tok-type">u8</span>, config),</span>
<span class="line" id="L280">                <span class="tok-type">u16</span>: Typed(<span class="tok-type">u16</span>, config),</span>
<span class="line" id="L281">                <span class="tok-type">u32</span>: Typed(<span class="tok-type">u32</span>, config),</span>
<span class="line" id="L282">                <span class="tok-type">u64</span>: Typed(<span class="tok-type">u64</span>, config),</span>
<span class="line" id="L283">                <span class="tok-type">u128</span>: Typed(<span class="tok-type">u128</span>, config),</span>
<span class="line" id="L284">                <span class="tok-type">u256</span>: Typed(<span class="tok-type">u256</span>, config),</span>
<span class="line" id="L285"></span>
<span class="line" id="L286">                <span class="tok-type">i1</span>: Typed(<span class="tok-type">i1</span>, config),</span>
<span class="line" id="L287">                <span class="tok-type">i2</span>: Typed(<span class="tok-type">i2</span>, config),</span>
<span class="line" id="L288">                <span class="tok-type">i3</span>: Typed(<span class="tok-type">i3</span>, config),</span>
<span class="line" id="L289">                <span class="tok-type">i4</span>: Typed(<span class="tok-type">i4</span>, config),</span>
<span class="line" id="L290">                <span class="tok-type">i8</span>: Typed(<span class="tok-type">i8</span>, config),</span>
<span class="line" id="L291">                <span class="tok-type">i16</span>: Typed(<span class="tok-type">i16</span>, config),</span>
<span class="line" id="L292">                <span class="tok-type">i32</span>: Typed(<span class="tok-type">i32</span>, config),</span>
<span class="line" id="L293">                <span class="tok-type">i64</span>: Typed(<span class="tok-type">i64</span>, config),</span>
<span class="line" id="L294">                <span class="tok-type">i128</span>: Typed(<span class="tok-type">i128</span>, config),</span>
<span class="line" id="L295">                <span class="tok-type">i256</span>: Typed(<span class="tok-type">i256</span>, config),</span>
<span class="line" id="L296">            };</span>
<span class="line" id="L297">            <span class="tok-kw">const</span> int_info = <span class="tok-builtin">@typeInfo</span>(int_union).Union;</span>
<span class="line" id="L298">            <span class="tok-kw">const</span> int_tag_info = <span class="tok-builtin">@typeInfo</span>(int_info.tag_type.?).Enum;</span>
<span class="line" id="L299"></span>
<span class="line" id="L300">            union_info.fields = union_info.fields ++ int_info.fields;</span>
<span class="line" id="L301">            <span class="tok-kw">for</span> (int_tag_info.fields) |tag| {</span>
<span class="line" id="L302">                tag_info.fields = tag_info.fields ++ .{ .{</span>
<span class="line" id="L303">                    .name = tag.name,</span>
<span class="line" id="L304">                    .value = tag.value + <span class="tok-number">6</span>,</span>
<span class="line" id="L305">                } };</span>
<span class="line" id="L306">            }</span>
<span class="line" id="L307">        }</span>
<span class="line" id="L308"></span>
<span class="line" id="L309">        <span class="tok-kw">for</span> (config.custom_types) |T| {</span>
<span class="line" id="L310">            union_info.fields = union_info.fields ++ .{ UnionField {</span>
<span class="line" id="L311">               .name = <span class="tok-builtin">@typeName</span>(T), </span>
<span class="line" id="L312">               .<span class="tok-type">type</span> = Typed(T, config),</span>
<span class="line" id="L313">               .alignment = <span class="tok-builtin">@alignOf</span>(Typed(T, config)),</span>
<span class="line" id="L314">            } };</span>
<span class="line" id="L315">            tag_info.fields = tag_info.fields ++ .{ .{</span>
<span class="line" id="L316">                .name = <span class="tok-builtin">@typeName</span>(T),</span>
<span class="line" id="L317">                .value = tag_info.fields.len,</span>
<span class="line" id="L318">            } };</span>
<span class="line" id="L319">            </span>
<span class="line" id="L320">        }</span>
<span class="line" id="L321"></span>
<span class="line" id="L322">        union_info.tag_type = <span class="tok-builtin">@Type</span>(.{ .Enum = tag_info }); </span>
<span class="line" id="L323"></span>
<span class="line" id="L324">        <span class="tok-kw">break</span> :customUnion <span class="tok-builtin">@Type</span>(.{ .Union = union_info });</span>
<span class="line" id="L325">    };</span>
<span class="line" id="L326">}</span>
<span class="line" id="L327"></span>
<span class="line" id="L328"><span class="tok-comment">/// Create a Custom Value type from the provided Config (`config`).</span></span>
<span class="line" id="L329"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">Custom</span>(<span class="tok-kw">comptime</span> config: Config) <span class="tok-type">type</span> {</span>
<span class="line" id="L330">    <span class="tok-kw">return</span> <span class="tok-kw">struct</span>{</span>
<span class="line" id="L331">        <span class="tok-comment">/// Custom Generic Value type.</span></span>
<span class="line" id="L332">        <span class="tok-kw">pub</span> <span class="tok-kw">const</span> GenericT = Generic(config);</span>
<span class="line" id="L333"></span>
<span class="line" id="L334">        <span class="tok-comment">/// Wrapped Generic union</span></span>
<span class="line" id="L335">        generic: GenericT = .{ .<span class="tok-type">bool</span> = .{} },</span>
<span class="line" id="L336"></span>
<span class="line" id="L337">        <span class="tok-comment">/// Get the Parsed and Validated Value of the inner Typed Value.</span></span>
<span class="line" id="L338">        <span class="tok-comment">/// Comptime Only </span></span>
<span class="line" id="L339">        <span class="tok-comment">// TODO: See if this can be made Runtime</span>
</span>
<span class="line" id="L340">        <span class="tok-kw">pub</span> <span class="tok-kw">inline</span> <span class="tok-kw">fn</span> <span class="tok-fn">get</span>(self: *<span class="tok-kw">const</span> <span class="tok-builtin">@This</span>()) !<span class="tok-kw">switch</span> (meta.activeTag(self.*.generic)) { </span>
<span class="line" id="L341">            <span class="tok-kw">inline</span> <span class="tok-kw">else</span> =&gt; |tag| <span class="tok-builtin">@TypeOf</span>(<span class="tok-builtin">@field</span>(self.*.generic, <span class="tok-builtin">@tagName</span>(tag))).getType(), </span>
<span class="line" id="L342">        } {</span>
<span class="line" id="L343">            <span class="tok-kw">return</span> <span class="tok-kw">switch</span> (meta.activeTag(self.*.generic)) {</span>
<span class="line" id="L344">                <span class="tok-kw">inline</span> <span class="tok-kw">else</span> =&gt; |tag| <span class="tok-kw">try</span> <span class="tok-builtin">@field</span>(self.*.generic, <span class="tok-builtin">@tagName</span>(tag)).get(),</span>
<span class="line" id="L345">            };</span>
<span class="line" id="L346">        }</span>
<span class="line" id="L347"></span>
<span class="line" id="L348">        <span class="tok-comment">/// Get the Parsed and Validated value of the inner Typed Value as the specified type (`T`).</span></span>
<span class="line" id="L349">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">getAs</span>(self: *<span class="tok-kw">const</span> <span class="tok-builtin">@This</span>(), <span class="tok-kw">comptime</span> T: <span class="tok-type">type</span>) !T {</span>
<span class="line" id="L350">            <span class="tok-kw">return</span> <span class="tok-kw">switch</span> (meta.activeTag(self.*.generic)) {</span>
<span class="line" id="L351">                <span class="tok-kw">inline</span> <span class="tok-kw">else</span> =&gt; |tag| {</span>
<span class="line" id="L352">                    <span class="tok-kw">const</span> field_self = <span class="tok-builtin">@field</span>(self.*.generic, <span class="tok-builtin">@tagName</span>(tag));</span>
<span class="line" id="L353">                    <span class="tok-kw">if</span> (<span class="tok-builtin">@TypeOf</span>(field_self).ChildT == T) <span class="tok-kw">return</span> <span class="tok-kw">try</span> field_self.get()</span>
<span class="line" id="L354">                    <span class="tok-kw">else</span> <span class="tok-kw">return</span> <span class="tok-kw">error</span>.RequestedTypeMismatch;</span>
<span class="line" id="L355">                },</span>
<span class="line" id="L356">            };</span>
<span class="line" id="L357">        }</span>
<span class="line" id="L358"></span>
<span class="line" id="L359">        <span class="tok-comment">/// Set the inner Typed Value if the provided Argument (`arg`) can be Parsed and Validated.</span></span>
<span class="line" id="L360">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">set</span>(self: *<span class="tok-kw">const</span> <span class="tok-builtin">@This</span>(), arg: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) !<span class="tok-type">void</span> { </span>
<span class="line" id="L361">            <span class="tok-kw">switch</span> (meta.activeTag(self.*.generic)) {</span>
<span class="line" id="L362">                <span class="tok-kw">inline</span> <span class="tok-kw">else</span> =&gt; |tag| <span class="tok-kw">try</span> <span class="tok-builtin">@field</span>(self.*.generic, <span class="tok-builtin">@tagName</span>(tag)).set(arg),</span>
<span class="line" id="L363">            }</span>
<span class="line" id="L364">        }</span>
<span class="line" id="L365"></span>
<span class="line" id="L366">        <span class="tok-comment">/// Get the inner Typed Value's Name.</span></span>
<span class="line" id="L367">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">name</span>(self: *<span class="tok-kw">const</span> <span class="tok-builtin">@This</span>()) []<span class="tok-kw">const</span> <span class="tok-type">u8</span> {</span>
<span class="line" id="L368">            <span class="tok-kw">return</span> <span class="tok-kw">switch</span> (meta.activeTag(self.*.generic)) {</span>
<span class="line" id="L369">                <span class="tok-kw">inline</span> <span class="tok-kw">else</span> =&gt; |tag| <span class="tok-builtin">@field</span>(self.*.generic, <span class="tok-builtin">@tagName</span>(tag)).name,</span>
<span class="line" id="L370">            };</span>
<span class="line" id="L371">        }</span>
<span class="line" id="L372">        <span class="tok-comment">/// Get the inner Typed Value's Type Name.</span></span>
<span class="line" id="L373">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">valType</span>(self: *<span class="tok-kw">const</span> <span class="tok-builtin">@This</span>()) []<span class="tok-kw">const</span> <span class="tok-type">u8</span> {</span>
<span class="line" id="L374">            <span class="tok-builtin">@setEvalBranchQuota</span>(config.max_int_bit_width * <span class="tok-number">10</span>);</span>
<span class="line" id="L375">            <span class="tok-kw">return</span> <span class="tok-kw">switch</span> (meta.activeTag(self.*.generic)) {</span>
<span class="line" id="L376">                <span class="tok-kw">inline</span> <span class="tok-kw">else</span> =&gt; |tag| <span class="tok-builtin">@typeName</span>(<span class="tok-builtin">@TypeOf</span>(<span class="tok-builtin">@field</span>(self.*.generic, <span class="tok-builtin">@tagName</span>(tag))).getType()),</span>
<span class="line" id="L377">            };</span>
<span class="line" id="L378">        }</span>
<span class="line" id="L379">        <span class="tok-comment">/// Get the inner Typed Value's Description.</span></span>
<span class="line" id="L380">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">description</span>(self: *<span class="tok-kw">const</span> <span class="tok-builtin">@This</span>()) []<span class="tok-kw">const</span> <span class="tok-type">u8</span> {</span>
<span class="line" id="L381">            <span class="tok-kw">return</span> <span class="tok-kw">switch</span> (meta.activeTag(self.*.generic)) {</span>
<span class="line" id="L382">                <span class="tok-kw">inline</span> <span class="tok-kw">else</span> =&gt; |tag| <span class="tok-builtin">@field</span>(self.*.generic, <span class="tok-builtin">@tagName</span>(tag)).description,</span>
<span class="line" id="L383">            };</span>
<span class="line" id="L384">        }</span>
<span class="line" id="L385">        <span class="tok-comment">/// Check the inner Typed Value's is Set.</span></span>
<span class="line" id="L386">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">isSet</span>(self: *<span class="tok-kw">const</span> <span class="tok-builtin">@This</span>()) <span class="tok-type">bool</span> {</span>
<span class="line" id="L387">            <span class="tok-kw">return</span> <span class="tok-kw">switch</span> (meta.activeTag(self.*.generic)) {</span>
<span class="line" id="L388">                <span class="tok-kw">inline</span> <span class="tok-kw">else</span> =&gt; |tag| <span class="tok-builtin">@field</span>(self.*.generic, <span class="tok-builtin">@tagName</span>(tag)).is_set,</span>
<span class="line" id="L389">            };</span>
<span class="line" id="L390">        }</span>
<span class="line" id="L391">        <span class="tok-comment">/// Get the inner Typed Value's Argument Index.</span></span>
<span class="line" id="L392">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">argIdx</span>(self: *<span class="tok-kw">const</span> <span class="tok-builtin">@This</span>()) <span class="tok-type">u7</span> {</span>
<span class="line" id="L393">            <span class="tok-kw">return</span> <span class="tok-kw">switch</span> (meta.activeTag(self.*.generic)) {</span>
<span class="line" id="L394">                <span class="tok-kw">inline</span> <span class="tok-kw">else</span> =&gt; |tag| <span class="tok-builtin">@field</span>(self.*.generic, <span class="tok-builtin">@tagName</span>(tag))._arg_idx,</span>
<span class="line" id="L395">            };</span>
<span class="line" id="L396">        }</span>
<span class="line" id="L397">        <span class="tok-comment">/// Get the inner Typed Value's Max Arguments.</span></span>
<span class="line" id="L398">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">maxArgs</span>(self: *<span class="tok-kw">const</span> <span class="tok-builtin">@This</span>()) <span class="tok-type">u7</span> {</span>
<span class="line" id="L399">            <span class="tok-kw">return</span> <span class="tok-kw">switch</span> (meta.activeTag(self.*.generic)) {</span>
<span class="line" id="L400">                <span class="tok-kw">inline</span> <span class="tok-kw">else</span> =&gt; |tag| <span class="tok-builtin">@field</span>(self.*.generic, <span class="tok-builtin">@tagName</span>(tag)).max_args,</span>
<span class="line" id="L401">            };</span>
<span class="line" id="L402">        }</span>
<span class="line" id="L403"></span>
<span class="line" id="L404">        <span class="tok-comment">/// Create a Generic Value with a specific Type (`T`).</span></span>
<span class="line" id="L405">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">ofType</span>(<span class="tok-kw">comptime</span> T: <span class="tok-type">type</span>, <span class="tok-kw">comptime</span> typed_val: Typed(T, config)) <span class="tok-builtin">@This</span>() {</span>
<span class="line" id="L406">            <span class="tok-kw">const</span> active_tag = <span class="tok-kw">if</span> (T == []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <span class="tok-str">&quot;string&quot;</span> <span class="tok-kw">else</span> <span class="tok-builtin">@typeName</span>(T);</span>
<span class="line" id="L407">            <span class="tok-kw">return</span> <span class="tok-builtin">@This</span>(){ .generic = <span class="tok-builtin">@unionInit</span>(GenericT, active_tag, typed_val) };</span>
<span class="line" id="L408">        }</span>
<span class="line" id="L409"></span>
<span class="line" id="L410">        <span class="tok-comment">/// Config for creating Values from Struct Fields using `from()`.</span></span>
<span class="line" id="L411">        <span class="tok-kw">pub</span> <span class="tok-kw">const</span> FromConfig = <span class="tok-kw">struct</span> {</span>
<span class="line" id="L412">            <span class="tok-comment">/// Ignore Incompatible types or error during compile time.</span></span>
<span class="line" id="L413">            ignore_incompatible: <span class="tok-type">bool</span> = <span class="tok-null">true</span>,</span>
<span class="line" id="L414">            <span class="tok-comment">/// Description for the Value.</span></span>
<span class="line" id="L415">            val_description: ?[]<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-null">null</span>,</span>
<span class="line" id="L416">        };</span>
<span class="line" id="L417"></span>
<span class="line" id="L418">        <span class="tok-comment">/// Create a Generic Value from a Valid Value StructField (`field`) using the provided FromConfig (`from_config`).</span></span>
<span class="line" id="L419">        <span class="tok-comment">/// This is intended for use with the corresponding `from()` methods in Command and Option, which ultimately create a Command from a given Struct.</span></span>
<span class="line" id="L420">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">from</span>(<span class="tok-kw">comptime</span> field: std.builtin.Type.StructField, from_config: FromConfig) ?<span class="tok-builtin">@This</span>() {</span>
<span class="line" id="L421">            <span class="tok-kw">const</span> field_info = <span class="tok-builtin">@typeInfo</span>(field.<span class="tok-type">type</span>);</span>
<span class="line" id="L422">            <span class="tok-kw">if</span> (field_info == .Pointer <span class="tok-kw">and</span> field_info.Pointer.child != <span class="tok-type">u8</span>) {</span>
<span class="line" id="L423">                <span class="tok-kw">if</span> (!from_config.ignore_incompatible) <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;The field '&quot;</span> ++ field.name ++ <span class="tok-str">&quot;' of type '&quot;</span> ++ <span class="tok-builtin">@typeName</span>(field.<span class="tok-type">type</span>) ++ <span class="tok-str">&quot;' is incompatible. Pointers must be of type '[]const u8'.&quot;</span>)</span>
<span class="line" id="L424">                <span class="tok-kw">else</span> <span class="tok-kw">return</span> <span class="tok-null">null</span>;</span>
<span class="line" id="L425">            }</span>
<span class="line" id="L426">            <span class="tok-kw">const</span> field_type = <span class="tok-kw">switch</span> (field_info) {</span>
<span class="line" id="L427">                .Optional =&gt; field_info.Optional.child,</span>
<span class="line" id="L428">                .Array =&gt; aryType: {</span>
<span class="line" id="L429">                    <span class="tok-kw">const</span> ary_info = <span class="tok-builtin">@typeInfo</span>(field_info.Array.child);</span>
<span class="line" id="L430">                    <span class="tok-kw">if</span> (ary_info == .Optional) <span class="tok-kw">break</span> :aryType ary_info.Optional.child</span>
<span class="line" id="L431">                    <span class="tok-kw">else</span> <span class="tok-kw">break</span> :aryType field_info.Array.child;</span>
<span class="line" id="L432">                },</span>
<span class="line" id="L433">                .Bool, .Int, .Float, .Pointer =&gt; field.<span class="tok-type">type</span>,</span>
<span class="line" id="L434">                <span class="tok-kw">else</span> =&gt; { </span>
<span class="line" id="L435">                    <span class="tok-kw">if</span> (!from_config.ignore_incompatible) <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;The field '&quot;</span> ++ field.name ++ <span class="tok-str">&quot;' of type '&quot;</span> ++ <span class="tok-builtin">@typeName</span>(field.<span class="tok-type">type</span>) ++ <span class="tok-str">&quot;' is incompatible.&quot;</span>)</span>
<span class="line" id="L436">                    <span class="tok-kw">else</span> <span class="tok-kw">return</span> <span class="tok-null">null</span>;</span>
<span class="line" id="L437">                },</span>
<span class="line" id="L438">            };</span>
<span class="line" id="L439">            <span class="tok-kw">return</span> ofType(field_type, .{</span>
<span class="line" id="L440">                .name = field.name,</span>
<span class="line" id="L441">                .description = from_config.val_description <span class="tok-kw">orelse</span> <span class="tok-str">&quot;The '&quot;</span> ++ field.name ++ <span class="tok-str">&quot;' Value of type '&quot;</span> ++ <span class="tok-builtin">@typeName</span>(field.<span class="tok-type">type</span>) ++ <span class="tok-str">&quot;'.&quot;</span>,</span>
<span class="line" id="L442">                .max_args = </span>
<span class="line" id="L443">                    <span class="tok-kw">if</span> (field_info == .Array) field_info.Array.len</span>
<span class="line" id="L444">                    <span class="tok-kw">else</span> <span class="tok-number">1</span>,</span>
<span class="line" id="L445">                .set_behavior =</span>
<span class="line" id="L446">                    <span class="tok-kw">if</span> (field_info == .Array) .Multi</span>
<span class="line" id="L447">                    <span class="tok-kw">else</span> .Last,</span>
<span class="line" id="L448">                .default_val = </span>
<span class="line" id="L449">                    <span class="tok-kw">if</span> (field.default_value != <span class="tok-null">null</span> <span class="tok-kw">and</span> field_info != .Array) <span class="tok-builtin">@as</span>(*field.<span class="tok-type">type</span>, <span class="tok-builtin">@ptrCast</span>(<span class="tok-builtin">@alignCast</span>(<span class="tok-builtin">@constCast</span>(field.default_value)))).*</span>
<span class="line" id="L450">                    <span class="tok-kw">else</span> <span class="tok-null">null</span>,</span>
<span class="line" id="L451">            });</span>
<span class="line" id="L452">        }</span>
<span class="line" id="L453">    };</span>
<span class="line" id="L454"></span>
<span class="line" id="L455">}</span>
<span class="line" id="L456"></span>
<span class="line" id="L457"><span class="tok-comment">/// Parsing Functions for various common requirements to be used with `parse_fn` in place of normal `parse()`.</span></span>
<span class="line" id="L458"><span class="tok-comment">/// Note, `parse_fn` is in no way limited to these functions.</span></span>
<span class="line" id="L459"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> ParsingFns = <span class="tok-kw">struct</span> {</span>
<span class="line" id="L460">    <span class="tok-comment">/// Builder Functions for common Parsing Functions.</span></span>
<span class="line" id="L461">    <span class="tok-kw">pub</span> <span class="tok-kw">const</span> Builder = <span class="tok-kw">struct</span> {</span>
<span class="line" id="L462">        <span class="tok-comment">/// Check for Alternate True Words (`true_words`) when parsing the provided Argument (`arg`) to a Boolean.</span></span>
<span class="line" id="L463">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">altTrue</span>(<span class="tok-kw">comptime</span> true_words: []<span class="tok-kw">const</span> []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <span class="tok-kw">fn</span>([]<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <span class="tok-type">anyerror</span>!<span class="tok-type">bool</span> {</span>
<span class="line" id="L464">            <span class="tok-kw">return</span> <span class="tok-kw">struct</span> {</span>
<span class="line" id="L465">                <span class="tok-kw">fn</span> <span class="tok-fn">isTrue</span>(arg: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) !<span class="tok-type">bool</span> {</span>
<span class="line" id="L466">                    <span class="tok-kw">for</span> (true_words[<span class="tok-number">0</span>..]) |word| { <span class="tok-kw">if</span> (mem.eql(<span class="tok-type">u8</span>, word, arg)) <span class="tok-kw">return</span> <span class="tok-null">true</span>; } <span class="tok-kw">else</span> <span class="tok-kw">return</span> <span class="tok-null">false</span>;</span>
<span class="line" id="L467">                }</span>
<span class="line" id="L468">            }.isTrue;</span>
<span class="line" id="L469">        }</span>
<span class="line" id="L470"></span>
<span class="line" id="L471">        <span class="tok-comment">/// Parse the given Integer (`arg`) as Base (`base`). Base options:</span></span>
<span class="line" id="L472">        <span class="tok-comment">/// - 0: Uses the 2 character prefix to determine the base. Default is Base 10. (This is also the default parsing option for Integers.)</span></span>
<span class="line" id="L473">        <span class="tok-comment">/// - 2: Base 2 / Binary</span></span>
<span class="line" id="L474">        <span class="tok-comment">/// - 8: Base 8 / Octal</span></span>
<span class="line" id="L475">        <span class="tok-comment">/// - 10: Base 10 / Decimal</span></span>
<span class="line" id="L476">        <span class="tok-comment">/// - 16: Base 16 / Hexadecimal</span></span>
<span class="line" id="L477">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">asBase</span>(<span class="tok-kw">comptime</span> NumT: <span class="tok-type">type</span>, <span class="tok-kw">comptime</span> base: <span class="tok-type">u8</span>) <span class="tok-kw">fn</span>([]<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <span class="tok-type">anyerror</span>!NumT {</span>
<span class="line" id="L478">            <span class="tok-kw">return</span> <span class="tok-kw">struct</span> { <span class="tok-kw">fn</span> <span class="tok-fn">toBase</span>(arg: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) !NumT { <span class="tok-kw">return</span> fmt.parseInt(NumT, arg, base); } }.toBase;</span>
<span class="line" id="L479">        }</span>
<span class="line" id="L480"></span>
<span class="line" id="L481">        <span class="tok-comment">/// Parse the given argument token (`arg`) to an Enum Tag of the provided `EnumT`.</span></span>
<span class="line" id="L482">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">asEnumType</span>(<span class="tok-kw">comptime</span> EnumT: <span class="tok-type">type</span>) enumFnType: {</span>
<span class="line" id="L483">            <span class="tok-kw">const</span> enum_info = <span class="tok-builtin">@typeInfo</span>(EnumT);</span>
<span class="line" id="L484">            <span class="tok-kw">if</span> (enum_info != .Enum) <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;The type of `EnumT` must be Enum!&quot;</span>);</span>
<span class="line" id="L485">            <span class="tok-kw">break</span> :enumFnType <span class="tok-kw">fn</span>([]<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <span class="tok-type">anyerror</span>!enum_info.Enum.tag_type;</span>
<span class="line" id="L486">        } {</span>
<span class="line" id="L487">            <span class="tok-kw">const</span> EnumTagT: <span class="tok-type">type</span> = <span class="tok-builtin">@typeInfo</span>(EnumT).Enum.tag_type;</span>
<span class="line" id="L488">            <span class="tok-kw">return</span> <span class="tok-kw">struct</span> { </span>
<span class="line" id="L489">                <span class="tok-kw">fn</span> <span class="tok-fn">enumInt</span>(arg: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) !EnumTagT { </span>
<span class="line" id="L490">                    <span class="tok-kw">const</span> enum_tag = meta.stringToEnum(EnumT, arg) <span class="tok-kw">orelse</span> <span class="tok-kw">return</span> <span class="tok-kw">error</span>.EnumTagDoesNotExist;</span>
<span class="line" id="L491">                    <span class="tok-kw">return</span> <span class="tok-builtin">@intFromEnum</span>(enum_tag);</span>
<span class="line" id="L492">                }</span>
<span class="line" id="L493">            }.enumInt;</span>
<span class="line" id="L494">        }</span>
<span class="line" id="L495"></span>
<span class="line" id="L496">    };</span>
<span class="line" id="L497"></span>
<span class="line" id="L498">    <span class="tok-comment">/// Trim all Whitespace from the beginning and end of the provided argument token (`arg`).</span></span>
<span class="line" id="L499">    <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">trimWhitespace</span>(arg: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <span class="tok-type">anyerror</span>![]<span class="tok-kw">const</span> <span class="tok-type">u8</span> {</span>
<span class="line" id="L500">        <span class="tok-kw">return</span> mem.trim(<span class="tok-type">u8</span>, arg, ascii.whitespace[<span class="tok-number">0</span>..]);</span>
<span class="line" id="L501">    }</span>
<span class="line" id="L502">};</span>
<span class="line" id="L503"></span>
<span class="line" id="L504"><span class="tok-comment">/// Validation Functions for various common requirements to be used with `valid_fn`.</span></span>
<span class="line" id="L505"><span class="tok-comment">/// Note, `valid_fn` is in no way limited to these functions.</span></span>
<span class="line" id="L506"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> ValidationFns = <span class="tok-kw">struct</span> {</span>
<span class="line" id="L507">    <span class="tok-comment">/// Builder Functions for common Validation Functions.</span></span>
<span class="line" id="L508">    <span class="tok-kw">pub</span> <span class="tok-kw">const</span> Builder = <span class="tok-kw">struct</span> {</span>
<span class="line" id="L509">        <span class="tok-comment">/// Check if the provided `NumT` (`num`) is within an inclusive or exclusive range.</span></span>
<span class="line" id="L510">        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">inRange</span>(<span class="tok-kw">comptime</span> NumT: <span class="tok-type">type</span>, <span class="tok-kw">comptime</span> start: NumT, <span class="tok-kw">comptime</span> end: NumT, <span class="tok-kw">comptime</span> inclusive: <span class="tok-type">bool</span>) <span class="tok-kw">fn</span>(NumT) <span class="tok-type">bool</span> {</span>
<span class="line" id="L511">            <span class="tok-kw">const</span> num_info = <span class="tok-builtin">@typeInfo</span>(NumT);</span>
<span class="line" id="L512">            <span class="tok-kw">switch</span> (num_info) {</span>
<span class="line" id="L513">                .Int, .Pointer =&gt; {},</span>
<span class="line" id="L514">                <span class="tok-kw">inline</span> <span class="tok-kw">else</span> =&gt; <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;The provided type '&quot;</span> ++ <span class="tok-builtin">@typeName</span>(NumT) ++ <span class="tok-str">&quot;' is not a numeric type. It must be an Integer or a Float.&quot;</span>),</span>
<span class="line" id="L515">            }</span>
<span class="line" id="L516"></span>
<span class="line" id="L517">            <span class="tok-kw">return</span> </span>
<span class="line" id="L518">                <span class="tok-kw">if</span> (inclusive) <span class="tok-kw">struct</span> { <span class="tok-kw">fn</span> <span class="tok-fn">inRng</span>(num: NumT) <span class="tok-type">bool</span> { <span class="tok-kw">return</span> num &gt;= start <span class="tok-kw">and</span> num &lt;= end; } }.inRng</span>
<span class="line" id="L519">                <span class="tok-kw">else</span> <span class="tok-kw">struct</span> { <span class="tok-kw">fn</span> <span class="tok-fn">inRng</span>(num: NumT) <span class="tok-type">bool</span> { <span class="tok-kw">return</span> num &gt; start <span class="tok-kw">and</span> num &lt; end; } }.inRng;</span>
<span class="line" id="L520">        }</span>
<span class="line" id="L521">    };</span>
<span class="line" id="L522"></span>
<span class="line" id="L523">    <span class="tok-comment">/// Check if the provided argument token (`filepath`) is a valid filepath.</span></span>
<span class="line" id="L524">    <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">validFilepath</span>(filepath: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <span class="tok-type">bool</span> {</span>
<span class="line" id="L525">        <span class="tok-kw">const</span> test_file = fs.cwd().openFile(filepath, .{}) <span class="tok-kw">catch</span> <span class="tok-kw">return</span> <span class="tok-null">false</span>;</span>
<span class="line" id="L526">        test_file.close();</span>
<span class="line" id="L527">        <span class="tok-kw">return</span> <span class="tok-null">true</span>;</span>
<span class="line" id="L528">    } </span>
<span class="line" id="L529">    <span class="tok-comment">/// Check if the provided argument token (`num_str`) is a valid Ordinal Number.</span></span>
<span class="line" id="L530">    <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">ordinalNum</span>(num_str: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <span class="tok-type">bool</span> {</span>
<span class="line" id="L531">        <span class="tok-kw">const</span> ordinals = <span class="tok-kw">enum</span> {</span>
<span class="line" id="L532">            first,</span>
<span class="line" id="L533">            second,</span>
<span class="line" id="L534">            third,</span>
<span class="line" id="L535">            fourth,</span>
<span class="line" id="L536">            fifth,</span>
<span class="line" id="L537">            sixth,</span>
<span class="line" id="L538">            seventh,</span>
<span class="line" id="L539">            eigth,</span>
<span class="line" id="L540">            ninth,</span>
<span class="line" id="L541">            tenth,</span>
<span class="line" id="L542">        };</span>
<span class="line" id="L543">        <span class="tok-kw">var</span> lower_buf: [<span class="tok-number">100</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;</span>
<span class="line" id="L544">        <span class="tok-kw">const</span> lower_slice = toLower(lower_buf[<span class="tok-number">0</span>..], num_str);</span>
<span class="line" id="L545">        <span class="tok-kw">return</span> meta.stringToEnum(ordinals, lower_slice) != <span class="tok-null">null</span>;</span>
<span class="line" id="L546">    }</span>
<span class="line" id="L547">};</span>
<span class="line" id="L548"></span>
<span class="line" id="L549"></span>
</code></pre></body>
</html>